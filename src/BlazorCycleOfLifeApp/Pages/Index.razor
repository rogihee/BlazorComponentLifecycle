@page "/"

@inject LifeCycleService LifeCycleService
<h1>Blazor Cycle of Life</h1>

<SplitView>
    <LeftContent>
        <DemoList ShowDemo="ShowDemo"></DemoList>
        @switch (ActiveDemo)
        {
            case 1:
                <CycleButton @ref="@CurrentRef" OnClick="@HandleCount">
                    Press me
                </CycleButton>
                break;
        }

        Counter: @Count
    </LeftContent>
    <RightContent>
        <LifeCycleView View="@CurrentRef?.LifeCycleHistory"/>
    </RightContent>
</SplitView>

@code
{
    private BaseCycleComponent CurrentRef { get; set; }
    private int ActiveDemo { get; set; }

    protected override void OnInitialized()
    {
        
    }

    private int Count { get; set; }

    private void HandleCount()
    {
        Count++;
    }

    private void ShowDemo(int nr)
    {
        ActiveDemo = nr;
    }
}
